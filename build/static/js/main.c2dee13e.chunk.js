(this["webpackJsonpnotes-app"]=this["webpackJsonpnotes-app"]||[]).push([[0],{13:function(e,t,n){},19:function(e,t,n){},20:function(e,t,n){},25:function(e,t,n){e.exports=n(40)},30:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(22),c=n.n(l),o=(n(30),n(5)),u=n(8),i=n(9),s=n(4),m=n.n(s),p=n(10),d=n(6),f=(n(19),n(17)),E="https://calm-river-32384.herokuapp.com/",b="note-token";function v(e){return g.apply(this,arguments)}function g(){return(g=Object(p.a)(m.a.mark((function e(t){var n,a,r=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.next=3,localStorage.getItem(b);case 3:return a=e.sent,e.abrupt("return",fetch(E+t,Object(f.a)({},n,{headers:Object(f.a)({Authorization:a,"Content-Type":"application/json"},n.headers||{})})).then((function(e){return 403!==e.status?e.json():{error:e}})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var h={get:function(e){return v(e)},post:function(e,t){return v(e,{method:"POST",body:JSON.stringify(t)})},deleteData:function(e){return v(e,{method:"delete"})}},j="/read",O="/readAll",y="/edit",N="/delete",w="/add";var k={addNote:function(e){return h.post("notes"+w,e)},deleteNote:function(e){return h.deleteData("notes"+N+"/"+e)},editNote:function(e,t){return h.post("notes"+y+"/"+t,e)},loadNote:function(e){return h.get("notes"+j+"/"+e)},loadAllNotes:function(){return h.get("notes"+O)}};n(20);function S(e){var t=e.note,n=e.onDelete,l=Object(a.useState)(!1),c=Object(d.a)(l,2),o=c[0],u=c[1],i=Object(a.useState)(""),s=Object(d.a)(i,2),f=s[0],E=s[1],b=Object(a.useRef)(null);function v(){return(v=Object(p.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=8;break}return n=b.current.value,e.next=4,k.editNote({val:n},t);case 4:E(n),u(!1),e.next=9;break;case 8:u(!0);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){k.loadNote(t).then(E)}),[o]),r.a.createElement("div",null,r.a.createElement("div",{className:"note"},r.a.createElement("span",{id:"title"},t),r.a.createElement("hr",{id:"title-line"}),r.a.createElement("div",{className:"note-content"},f),r.a.createElement("input",{type:"button",onClick:function(){n(t)},name:"delete"}),r.a.createElement("input",{type:"button",onClick:function(){return v.apply(this,arguments)},name:"edit"}),o?r.a.createElement("input",{type:"text",name:"editNote",id:"editNote",ref:b}):null))}var x=function(e){var t=e.notes,n=e.onDelete,a=e.onAdd,l=e.onEdit,c=t.map((function(e){return r.a.createElement("li",{key:e},r.a.createElement(S,{note:e,onDelete:n,onAdd:a,onEdit:l}))}));return r.a.createElement("ul",null,c)};n(32);function A(e){var t=e.onAdd,n=Object(a.useRef)(null);return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("input",{className:"login",placeholder:"Add new item",type:"text",id:"addNote",name:"addNote",ref:n}),r.a.createElement("input",{id:"plus",type:"button",className:"primary",onClick:function(){t(n.current.value)},value:"+"})))}n(33);function R(e){Object(o.a)(e);var t=Object(a.useState)([]),n=Object(d.a)(t,2),l=n[0],c=n[1],u=Object(a.useState)(!1),s=Object(d.a)(u,2),f=s[0],E=s[1];function b(){return(b=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.deleteNote(t);case 2:c(l.filter((function(e){return e!==t})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return(v=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.addNote({value:t});case 2:n=e.sent,c(l.concat(n.note.id));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){k.loadAllNotes().then((function(e){e.error?(alert(e.error.statusText),E(!0)):c(e)}))}),[f]),f?r.a.createElement(i.a,{to:"/login",from:"/notes"}):r.a.createElement("div",{id:"container"},r.a.createElement("input",{type:"button",onClick:function(){E(!0)},name:"exit",className:"primary",id:"logout"}),r.a.createElement(A,{onAdd:function(e){return v.apply(this,arguments)}}),r.a.createElement(x,{notes:l,onDelete:function(e){return b.apply(this,arguments)}}))}var D="/login",P="/signup";var C={signup:function(e){return h.post("user"+P,e)},login:function(e){return h.post("user"+D,e)},validateAllFields:function(e){return!!(e.username&&e.password&&e.confirmedPassword&&e.email)&&e.confirmedPassword===e.password}};n(13),n(39);function F(e){Object(o.a)(e);var t=Object(a.useRef)(null),n=Object(a.useRef)(null),l=Object(a.useState)(!1),c=Object(d.a)(l,2),u=c[0],s=c[1];return u?r.a.createElement(i.a,{to:"/notes",from:"/login"}):r.a.createElement("div",{id:"form-login",onload:localStorage.clear()},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),C.login({password:t.current.value,email:n.current.value}).then((function(e){localStorage.setItem("note-token",e.token),s(e.redirect)}))},method:"post"},r.a.createElement("p",{id:"form-header"},"Login"),r.a.createElement("hr",null),r.a.createElement("input",{className:"login",type:"email",placeholder:"E-mail",name:"email",ref:n}),r.a.createElement("br",null),r.a.createElement("input",{className:"login",type:"password",placeholder:"Password",name:"password",ref:t}),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",class:"primary login",id:"login-btn",value:"Sign in"})))}function I(e){Object(o.a)(e);var t=Object(a.useState)(!1),n=Object(d.a)(t,2),l=n[0],c=n[1],u=Object(a.useRef)(null),s=Object(a.useRef)(null),m=Object(a.useRef)(null),p=Object(a.useRef)(null);return l?r.a.createElement(i.a,{to:"/login",from:"/signup"}):r.a.createElement("div",{id:"form-registration",onLoad:localStorage.clear()},r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t={username:s.current.value,password:u.current.value,email:m.current.value,confirmedPassword:p.current.value};C.validateAllFields(t)?C.signup(t).then((function(e){e.message&&alert(e.message),c(e.redirect)})):alert("Fill all fields, please")},method:"post"},r.a.createElement("p",{id:"form-header"},"Register"),r.a.createElement("hr",null),r.a.createElement("input",{className:"signup",type:"text",placeholder:"Name",name:"username",ref:s}),r.a.createElement("br",null),r.a.createElement("input",{className:"signup",type:"email",placeholder:"E-mail",name:"email",ref:m}),r.a.createElement("br",null),r.a.createElement("input",{className:"signup",type:"password",placeholder:"Password",name:"password",ref:u}),r.a.createElement("br",null),r.a.createElement("input",{className:"signup",type:"password",placeholder:"Confirm password",name:"confirmPassword",ref:p}),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",class:"primary",id:"signup-btn",value:"Sign up"})))}function J(e){return Object(o.a)(e),r.a.createElement("ul",{class:"nav"},r.a.createElement("li",null,r.a.createElement(u.b,{className:"link",to:"/signup"},"Sign up")),r.a.createElement("li",null,r.a.createElement(u.b,{className:"link",to:"/login"},"Sign in")))}var T=document.getElementById("root");c.a.render(r.a.createElement((function(e){return Object(o.a)(e),r.a.createElement(u.a,null,r.a.createElement(J,null),r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/signup"},r.a.createElement(I,null)),r.a.createElement(i.b,{exact:!0,path:"/login"},r.a.createElement(F,null)),r.a.createElement(i.b,{path:"/notes"},r.a.createElement(R,null))))}),null),T)}},[[25,1,2]]]);
//# sourceMappingURL=main.c2dee13e.chunk.js.map