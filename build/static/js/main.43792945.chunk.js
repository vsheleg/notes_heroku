(this["webpackJsonpnotes-app"]=this["webpackJsonpnotes-app"]||[]).push([[0],{12:function(e,t,n){},18:function(e,t,n){},19:function(e,t,n){},24:function(e,t,n){e.exports=n(39)},29:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(21),o=n.n(l),c=(n(29),n(5)),u=n(8),i=n(9),s=n(4),m=n.n(s),d=n(6),p=(n(18),n(16)),f="https://notes-frontend-app.herokuapp.com/",E="note-token";function b(e){var t,n,a=arguments;return m.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=a.length>1&&void 0!==a[1]?a[1]:{},r.next=3,m.a.awrap(localStorage.getItem(E));case 3:return n=r.sent,r.abrupt("return",fetch(f+e,Object(p.a)({},t,{headers:Object(p.a)({Authorization:n,"Content-Type":"application/json"},t.headers||{})})).then((function(e){return 403!==e.status?e.json():{error:e}})));case 5:case"end":return r.stop()}}))}var v={get:function(e){return b(e)},post:function(e,t){return b(e,{method:"POST",body:JSON.stringify(t)})},deleteData:function(e){return b(e,{method:"delete"})}},g="/read",h="/readAll",j="/edit",O="/delete",N="/add";var w={addNote:function(e){return v.post("notes"+N,e)},deleteNote:function(e){return v.deleteData("notes"+O+"/"+e)},editNote:function(e,t){return v.post("notes"+j+"/"+t,e)},loadNote:function(e){return v.get("notes"+g+"/"+e)},loadAllNotes:function(){return v.get("notes"+h)}};n(19);function y(e){var t=e.note,n=e.onDelete,l=Object(a.useState)(!1),o=Object(d.a)(l,2),c=o[0],u=o[1],i=Object(a.useState)(""),s=Object(d.a)(i,2),p=s[0],f=s[1],E=Object(a.useRef)(null);return Object(a.useEffect)((function(){w.loadNote(t).then(f)}),[c]),r.a.createElement("div",null,r.a.createElement("div",{className:"note"},r.a.createElement("span",{id:"title"},t),r.a.createElement("hr",{id:"title-line"}),r.a.createElement("div",{className:"note-content"},p),r.a.createElement("input",{type:"button",onClick:function(){n(t)},name:"delete"}),r.a.createElement("input",{type:"button",onClick:function(){var e;return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(!c){n.next=8;break}return e=E.current.value,n.next=4,m.a.awrap(w.editNote({val:e},t));case 4:f(e),u(!1),n.next=9;break;case 8:u(!0);case 9:case"end":return n.stop()}}))},name:"edit"}),c?r.a.createElement("input",{type:"text",name:"editNote",id:"editNote",ref:E}):null))}var S=function(e){var t=e.notes,n=e.onDelete,a=e.onAdd,l=e.onEdit,o=t.map((function(e){return r.a.createElement("li",{key:e},r.a.createElement(y,{note:e,onDelete:n,onAdd:a,onEdit:l}))}));return r.a.createElement("ul",null,o)};n(31);function x(e){var t=e.onAdd,n=Object(a.useRef)(null);return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("input",{className:"login",placeholder:"Add new item",type:"text",id:"addNote",name:"addNote",ref:n}),r.a.createElement("input",{id:"plus",type:"button",className:"primary",onClick:function(){t(n.current.value)},value:"+"})))}n(32);function k(e){Object(c.a)(e);var t=Object(a.useState)([]),n=Object(d.a)(t,2),l=n[0],o=n[1],u=Object(a.useState)(!1),s=Object(d.a)(u,2),p=s[0],f=s[1];return Object(a.useEffect)((function(){w.loadAllNotes().then((function(e){e.error?(alert(e.error.statusText),f(!0)):o(e)}))}),[p]),p?r.a.createElement(i.a,{to:"/login",from:"/notes"}):r.a.createElement("div",{id:"container"},r.a.createElement("input",{type:"button",onClick:function(){f(!0)},name:"exit",className:"primary",id:"logout"}),r.a.createElement(x,{onAdd:function(e){var t;return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m.a.awrap(w.addNote({value:e}));case 2:t=n.sent,o(l.concat(t.note.id));case 4:case"end":return n.stop()}}))}}),r.a.createElement(S,{notes:l,onDelete:function(e){return m.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.awrap(w.deleteNote(e));case 2:o(l.filter((function(t){return t!==e})));case 3:case"end":return t.stop()}}))}}))}var A="/login",R="/signup";var D={signup:function(e){return v.post("user"+R,e)},login:function(e){return v.post("user"+A,e)},validateAllFields:function(e){return!!(e.username&&e.password&&e.confirmedPassword&&e.email)&&e.confirmedPassword===e.password}};n(12),n(38);function P(e){Object(c.a)(e);var t=Object(a.useRef)(null),n=Object(a.useRef)(null),l=Object(a.useState)(!1),o=Object(d.a)(l,2),u=o[0],s=o[1];return u?r.a.createElement(i.a,{to:"/notes",from:"/login"}):r.a.createElement("div",{id:"form-login",onload:localStorage.clear()},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),D.login({password:t.current.value,email:n.current.value}).then((function(e){localStorage.setItem("note-token",e.token),s(e.redirect)}))},method:"post"},r.a.createElement("p",{id:"form-header"},"Login"),r.a.createElement("hr",null),r.a.createElement("input",{className:"login",type:"email",placeholder:"E-mail",name:"email",ref:n}),r.a.createElement("br",null),r.a.createElement("input",{className:"login",type:"password",placeholder:"Password",name:"password",ref:t}),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",class:"primary login",id:"login-btn",value:"Sign in"})))}function C(e){Object(c.a)(e);var t=Object(a.useState)(!1),n=Object(d.a)(t,2),l=n[0],o=n[1],u=Object(a.useRef)(null),s=Object(a.useRef)(null),m=Object(a.useRef)(null),p=Object(a.useRef)(null);return l?r.a.createElement(i.a,{to:"/login",from:"/signup"}):r.a.createElement("div",{id:"form-registration",onLoad:localStorage.clear()},r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t={username:s.current.value,password:u.current.value,email:m.current.value,confirmedPassword:p.current.value};D.validateAllFields(t)?D.signup(t).then((function(e){e.message&&alert(e.message),o(e.redirect)})):alert("Fill all fields, please")},method:"post"},r.a.createElement("p",{id:"form-header"},"Register"),r.a.createElement("hr",null),r.a.createElement("input",{className:"signup",type:"text",placeholder:"Name",name:"username",ref:s}),r.a.createElement("br",null),r.a.createElement("input",{className:"signup",type:"email",placeholder:"E-mail",name:"email",ref:m}),r.a.createElement("br",null),r.a.createElement("input",{className:"signup",type:"password",placeholder:"Password",name:"password",ref:u}),r.a.createElement("br",null),r.a.createElement("input",{className:"signup",type:"password",placeholder:"Confirm password",name:"confirmPassword",ref:p}),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",class:"primary",id:"signup-btn",value:"Sign up"})))}function F(e){return Object(c.a)(e),r.a.createElement("ul",{class:"nav"},r.a.createElement("li",null,r.a.createElement(u.b,{className:"link",to:"/signup"},"Sign up")),r.a.createElement("li",null,r.a.createElement(u.b,{className:"link",to:"/login"},"Sign in")))}var I=document.getElementById("root");o.a.render(r.a.createElement((function(e){return Object(c.a)(e),r.a.createElement(u.a,null,r.a.createElement(F,null),r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/signup"},r.a.createElement(C,null)),r.a.createElement(i.b,{exact:!0,path:"/login"},r.a.createElement(P,null)),r.a.createElement(i.b,{path:"/notes"},r.a.createElement(k,null))))}),null),I)}},[[24,1,2]]]);
//# sourceMappingURL=main.43792945.chunk.js.map